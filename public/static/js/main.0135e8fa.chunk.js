(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{519:function(e,t,a){e.exports=a(850)},623:function(e,t,a){},641:function(e,t,a){},841:function(e,t,a){},842:function(e,t,a){},843:function(e,t,a){},850:function(e,t,a){"use strict";a.r(t);a(165),a(173),a(174),a(175),a(176),a(177),a(178),a(179),a(180),a(181),a(182),a(183),a(184),a(185),a(186),a(248),a(250),a(251),a(252),a(253),a(254),a(255),a(257),a(258),a(190),a(262),a(263),a(109),a(266),a(267),a(269),a(270),a(271),a(272),a(273),a(274),a(275),a(276),a(277),a(278),a(279),a(280),a(281),a(284),a(285),a(286),a(196),a(126),a(288),a(290),a(291),a(292),a(293),a(294),a(295),a(296),a(298),a(299),a(300),a(301),a(302),a(303),a(304),a(305),a(198),a(306),a(307),a(308),a(310),a(312),a(313),a(314),a(315),a(316),a(317),a(319),a(320),a(322),a(323),a(324),a(326),a(327),a(328),a(329),a(330),a(331),a(332),a(334),a(335),a(336),a(337),a(338),a(339),a(340),a(341),a(200),a(342),a(343),a(349),a(350),a(351),a(352),a(353),a(354),a(355),a(356),a(357),a(358),a(359),a(360),a(361),a(362),a(202),a(363),a(364),a(204),a(365),a(366),a(367),a(368),a(134),a(369),a(370),a(373),a(374),a(375),a(376),a(377),a(378),a(379),a(380),a(381),a(382),a(383),a(384),a(385),a(386),a(387),a(388),a(389),a(390),a(391),a(392),a(393),a(394),a(395),a(396),a(399),a(400),a(401),a(402),a(403),a(404),a(405),a(406),a(407),a(408),a(409),a(410),a(411),a(412),a(413),a(414),a(415),a(416),a(417),a(418),a(419),a(420),a(421),a(422),a(423),a(424),a(425),a(426),a(427),a(428),a(429),a(430),a(431),a(138),a(433),a(527),a(528),a(529),a(530),a(531),a(532),a(534),a(535),a(536),a(537),a(538),a(539),a(540),a(541),a(543),a(544),a(545),a(546),a(547),a(548),a(549),a(550),a(551),a(552),a(553),a(554),a(555),a(556),a(557),a(558),a(559),a(560),a(561),a(562),a(563),a(564),a(565),a(566),a(567),a(569),a(570),a(571),a(572),a(573),a(574),a(575),a(576),a(577),a(578),a(579),a(580),a(581),a(582),a(583),a(584),a(585),a(586),a(587),a(588),a(589),a(590),a(591),a(592),a(593),a(594),a(595),a(596),a(597),a(598),a(599),a(600),a(602),a(437),a(438),a(439),a(603),a(604),a(605),a(606),a(607),a(608),a(609),a(440),a(442),a(443),a(444),a(445),a(447),a(209),a(448),a(615);var n=a(1),s=a.n(n),r=a(161),o=a.n(r),i=(a(623),a(162)),c=a(34),l=a.n(c),u=a(60),d=a(56),m=a(57),p=a(58),h=a(59),g=a(61),f=a.n(g),v=(a(641),a(62)),b=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).checkIfUserAlreadyLoggedIn=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("".concat("/api","/login"),n.state);case 2:e.sent,(t=window.storage)&&null!=t&&t.user&&0!==Object.keys(t.user).length&&n.navigate(t.user);case 5:case"end":return e.stop()}}),e)}))),n.authenticateRes=function(e){if(200==e.status&&e.data&&1==e.data.success){n.setState({showError:!1});var t={isLoggedIn:!0,user:{name:e.data.data.name,id:e.data.data.id,is_admin:e.data.data.is_admin,auth_token:e.data.data.auth_token}};window.storage=t,n.navigate(t.user)}else n.setState({showError:!0})},n.textFieldChange=function(e){var t=e.target.name.trim(),a=e.target.value.trim();n.setState(Object(i.a)({},t,a))},n.authenticate=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,f.a.post("".concat("/api","/login"),n.state);case 3:a=e.sent,n.authenticateRes(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={name:"",password:"",showError:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.checkIfUserAlreadyLoggedIn()}},{key:"navigate",value:function(e){1==e.is_admin?this.props.history.push("/admin"):this.props.history.push("/user")}},{key:"render",value:function(){return s.a.createElement("div",{className:"wrapper fadeInDown"},s.a.createElement("div",{className:"error-msg",style:{display:this.state.showError?"block":"none"}},"Please Enter Valid Credentials to Proceed"),s.a.createElement("div",{className:"fadeIn first"},s.a.createElement("h4",{id:"logText"},"LOG IN")),s.a.createElement("div",{id:"formContent"},s.a.createElement("form",null,s.a.createElement("input",{type:"text",id:"login",className:"fadeIn second",name:"name",placeholder:"name",onChange:this.textFieldChange}),s.a.createElement("input",{type:"text",id:"password",className:"fadeIn third",name:"password",placeholder:"password",onChange:this.textFieldChange}),s.a.createElement("input",{type:"submit",className:"fadeIn fourth",value:"Log In",onClick:this.authenticate}))))}}]),a}(n.Component),y=Object(v.e)(b),E=a(518),N=a(120),k=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).CMap=Object(N.withScriptjs)(Object(N.withGoogleMap)((function(e){return s.a.createElement(N.GoogleMap,{zoom:e.positionMap.defaultZoom,center:{lat:e.positionMap.delat,lng:e.positionMap.delng}},e.children)}))),e.assignDefaultPosition=function(){var t=e.props.defaultLab,a=e.props.zoom;if(t){var n=parseFloat(t.latitude),s=parseFloat(t.longitude);a||(a=2),e.setState({delat:n,delng:s,defaultZoom:parseInt(a)})}},e.state={delat:0,delng:0,defaultZoom:2},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.assignDefaultPosition()}},{key:"componentWillReceiveProps",value:function(e){this.assignDefaultPosition()}},{key:"render",value:function(){return s.a.createElement("div",{style:{marginBottom:"3%"}},s.a.createElement("div",null,s.a.createElement(this.CMap,{googleMapURL:this.props.googleMapURL,loadingElement:s.a.createElement("div",{style:{height:"500px",width:"100%",margin:"auto"}}),containerElement:s.a.createElement("div",{style:{height:"500px",width:"100%",margin:"auto"}}),mapElement:s.a.createElement("div",{style:{height:"500px",width:"100%",margin:"auto"}}),positionMap:this.state},this.props.labs.map((function(e){return s.a.createElement(N.Marker,{key:e.id,position:{lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)}})})))))}}]),a}(n.Component);k.defaultProps={googleMapURL:"https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places&key=".concat("AIzaSyADNy_RvU-Xvgle_5kudnBzLn8F6D48fWU")};a(841);var w=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).textFieldChange=function(t){var a=t.target.name.trim(),n=t.target.value.trim();e.setState(Object(i.a)({},a,n))},e.redirectIfNotAuth=function(){var t=e.state.userState;e.state.userState&&t&&t.isLoggedIn&&0!=t.user.is_admin||e.props.history.push("/")},e.getLabRecords=Object(u.a)(l.a.mark((function t(){var a,n,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("",!e.state.userState){t.next=10;break}return a=e.state.userState.user.auth_token,e.setState({token:a}),e.setState({userName:e.state.userState.user.name}),t.next=7,f.a.get("".concat("/api","/labs?token=").concat(a));case 7:n=t.sent,s=n.data.labs,e.setState({labs:s});case 10:case"end":return t.stop()}}),t)}))),e.addNewRecord=Object(u.a)(l.a.mark((function t(){var a,n,s,r,o,i,c,u,d,m,p,h;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state.labs,n=e.state.category,s=e.state.address,r=e.state.city,o=e.state.country,i=e.state.title,!(!isNaN(e.state.latitude)&&!isNaN(e.state.longitude)&&n&&s&&r&&o&&i)){t.next=19;break}return c=parseFloat(e.state.latitude),u=parseFloat(e.state.longitude),d={latitude:c,longitude:u,category:n,address:s,city:r,country:o,title:i},t.next=12,f.a.post("".concat("/api","/labs?token=").concat(e.state.token),d);case 12:m=t.sent,p=m.data.lab,a.push(p),(h=e.state.defaultLab).latitude=p.latitude,h.longitude=p.longitude,e.setState({labs:a,defaultLab:h,latitude:"",longitude:"",category:"",address:"",city:"",country:"",title:""});case 19:case"end":return t.stop()}}),t)}))),e.logout=function(){window.storage={},e.props.history.push("/")},e.state={userState:window.storage,token:"",labs:[],userName:"",latitude:"",longitude:"",category:"",address:"",city:"",country:"",title:"",defaultLab:{latitude:0,longitude:0}},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.redirectIfNotAuth(),this.getLabRecords()}},{key:"render",value:function(){return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{id:"label"},"Welcome ",this.state.userName),s.a.createElement("button",{className:"btn btn-danger",onClick:this.logout},"Logout")),s.a.createElement("div",null,s.a.createElement(k,this.state)),s.a.createElement("div",{className:"form2"},s.a.createElement("input",{type:"text",className:"form-control",onChange:this.textFieldChange,name:"title",id:"formField1",value:this.state.title,placeholder:"Title"}),s.a.createElement("input",{type:"text",className:"form-control",onChange:this.textFieldChange,name:"category",id:"formField2",value:this.state.category,placeholder:"Category"}),s.a.createElement("input",{type:"text",className:"form-control",onChange:this.textFieldChange,name:"latitude",id:"formField1",value:this.state.latitude,placeholder:"Latitude"}),s.a.createElement("input",{type:"text",className:"form-control",onChange:this.textFieldChange,name:"longitude",id:"formField2",value:this.state.longitude,placeholder:"Longitude"}),s.a.createElement("input",{type:"text",className:"form-control",onChange:this.textFieldChange,name:"address",id:"formField1",value:this.state.address,placeholder:"Address"}),s.a.createElement("input",{type:"text",className:"form-control",onChange:this.textFieldChange,name:"city",id:"formField2",value:this.state.city,placeholder:"City"}),s.a.createElement("input",{type:"text",className:"form-control",onChange:this.textFieldChange,name:"country",id:"formField2",value:this.state.country,placeholder:"Country"}),s.a.createElement("button",{className:"btn btn-danger",id:"formField3",onClick:this.addNewRecord},"Add New Lab")))}}]),a}(n.Component),x=(a(842),a(843),function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).redirectIfNotAuth=function(){var e=n.state.userState;n.state.userState&&e&&e.isLoggedIn&&1!=e.user.is_admin||n.props.history.push("/")},n.getLabRecord=Object(u.a)(l.a.mark((function e(){var t,a,s,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("",!n.state.userState){e.next=8;break}return t=n.state.userState.user.auth_token,n.setState({token:t}),e.next=6,f.a.get("".concat("/api","/getLab?token=").concat(t,"&labId=").concat(n.state.labId));case 6:200==(a=e.sent).data.status&&(s=a.data.lab,(r=n.state.labs).push(s),(o=n.state.defaultLab).latitude=parseFloat(s.latitude),o.longitude=parseFloat(s.longitude),n.setState({lab:s,defaultLab:o,labs:r}));case 8:case"end":return e.stop()}}),e)}))),n.navigateToUser=function(){n.props.history.push("/user")},n.state={labId:e.match.params.labId,lab:{},userState:window.storage,token:"",defaultLab:{latitude:0,longitude:0},labs:[]},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.redirectIfNotAuth(),this.getLabRecord()}},{key:"render",value:function(){var e="Loading...",t=this.state.lab;return Object.keys(t).length>0&&(e=s.a.createElement("div",{id:"detailsDiv"},s.a.createElement("div",{id:"details"},s.a.createElement("button",{type:"button",id:"backBtn",className:"btn btn-secondary",onClick:this.navigateToUser},"Back"),s.a.createElement("div",{className:"contentGroup"},s.a.createElement("div",{className:"label"},"Title"),s.a.createElement("div",{className:"value"},t.title)),s.a.createElement("div",{className:"contentGroup"},s.a.createElement("div",{className:"label"},"Category"),s.a.createElement("div",{className:"value"},t.category)),s.a.createElement("div",{className:"contentGroup"},s.a.createElement("div",{className:"label"},"Address"),s.a.createElement("div",{className:"value"},t.address)),s.a.createElement("div",{className:"contentGroup"},s.a.createElement("div",{className:"label"},"City"),s.a.createElement("div",{className:"value"},t.city)),s.a.createElement("div",{className:"contentGroup"},s.a.createElement("div",{className:"label"},"Country"),s.a.createElement("div",{className:"value"},t.country))),s.a.createElement("div",{id:"map"},s.a.createElement(k,Object.assign({zoom:"11"},this.state))))),s.a.createElement("div",null,e)}}]),a}(n.Component)),C=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).redirectIfNotAuth=function(){var t=e.state.userState;e.state.userState&&t&&t.isLoggedIn&&1!=t.user.is_admin||e.props.history.push("/")},e.getLabRecords=Object(u.a)(l.a.mark((function t(){var a,n,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("",!e.state.userState){t.next=9;break}return a=e.state.userState.user.auth_token,e.setState({token:a}),t.next=6,f.a.get("".concat("/api","/labs?token=").concat(a));case 6:n=t.sent,s=n.data.labs,e.setState({labs:s,searchLabs:s});case 9:case"end":return t.stop()}}),t)}))),e.openGoogleMaps=function(e){var t="https://www.google.com/maps/search/?api=1&query=".concat(e.latitude,",").concat(e.longitude);window.open(t,"_blank")},e.logout=function(){window.storage={},e.props.history.push("/")},e.filterRecords=function(t){var a=t.target.value.trim(),n=e.state.labs,s=!1;0==(n=n.filter((function(e){return s=!1,Object.keys(e).forEach((function(t){var n=e[t]||"";n=null==n?"":n.toString(),(""===a||n.toLowerCase().includes(a.toLowerCase()))&&(s=!0)})),!!s}))).length?e.setState({searchLabs:n,message:"No records Found"}):e.setState({searchLabs:n,message:""})},e.state={userState:window.storage,token:"",labs:[],searchLabs:[],message:""},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.redirectIfNotAuth(),this.getLabRecords()}},{key:"navigateToDetails",value:function(e){this.props.history.push("/userDetails/".concat(e.id))}},{key:"render",value:function(){var e=this,t=this.state.searchLabs,a="Loading...",n=this.state.message;if(""!==n&&(a=s.a.createElement("div",{className:"info-msg"},n)),t&&t.length>0){var r=t.map((function(t){return s.a.createElement("div",{key:t.id,className:"card"},s.a.createElement("div",{className:"card-body"},s.a.createElement("h5",{className:"card-title"},t.title),s.a.createElement("p",{className:"card-text"},"Category: ",t.category)),s.a.createElement("div",{className:"card-footer"},s.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(){e.navigateToDetails(t)}},"View Details"),s.a.createElement("button",{className:"btn btn-success",onClick:function(){e.openGoogleMaps(t)}},"View on Maps")))}));a=s.a.createElement("div",{className:"card-columns"},r)}return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"form-group has-search"},s.a.createElement("span",{className:"fa fa-search form-control-feedback"}),s.a.createElement("input",{type:"text",className:"form-control",placeholder:"Search for Labs",onChange:this.filterRecords}),s.a.createElement("button",{className:"btn btn-danger",onClick:this.logout},"Logout")),s.a.createElement("div",null,a))}}]),a}(n.Component);var L=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(E.a,null,s.a.createElement("div",null,s.a.createElement(v.a,{exact:!0,path:"/",component:y}),s.a.createElement(v.a,{exact:!0,path:"/user",component:C}),s.a.createElement(v.a,{exact:!0,path:"/admin",component:w}),s.a.createElement(v.a,{exact:!0,path:"/userDetails/:labId",component:x}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(844),a(845),a(846),a(847);o.a.render(s.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[519,1,2]]]);
//# sourceMappingURL=main.0135e8fa.chunk.js.map